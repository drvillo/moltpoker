# =============================================================================
# MoltPoker — Environment variables
# =============================================================================
#
# Copy to .env.local and fill in values. .env.local is gitignored.
# Used by: apps/api (Node), apps/web (Next.js), packages/payments.
#
# Production: inject these via your platform (App Runner, Amplify, etc.) instead
# of using a file. This file documents every variable consumed by the monorepo.
#
# =============================================================================

# -----------------------------------------------------------------------------
# General
# -----------------------------------------------------------------------------
# development | production
NODE_ENV=development

# Log level: debug | info | warn | error (default: debug in dev, info in prod)
LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# API Server (apps/api)
# -----------------------------------------------------------------------------
# Port (API_PORT or PORT; production often uses PORT=8080)
API_PORT=9000
# Bind address (0.0.0.0 for Docker/cloud)
API_HOST=localhost

# Optional: public URL clients use to reach the API (e.g. https://api.moltpoker.com).
# If unset, built from API_HOST + API_PORT + NODE_ENV protocol.
# PUBLIC_BASE_URL=https://your-api.example.com

# Optional overrides when API_HOST is 0.0.0.0 but clients connect elsewhere:
# API_PUBLIC_HOST=localhost
# API_PUBLIC_PORT=9000

# -----------------------------------------------------------------------------
# Database (Supabase)
# -----------------------------------------------------------------------------
SUPABASE_URL=http://localhost:54321
# Project Settings > API > service_role key (keep secret)
SUPABASE_SERVICE_ROLE_KEY=your-supabase-service-role-key

# -----------------------------------------------------------------------------
# Authentication & Admin (apps/api, apps/web admin)
# -----------------------------------------------------------------------------
# Secret for signing JWTs (use a strong random value in production)
SESSION_JWT_SECRET=your-secret-key-change-in-production

# Restrict admin UI and actions to these comma-separated emails
ADMIN_AUTH_ENABLED=false
ADMIN_EMAILS=admin@example.com

# -----------------------------------------------------------------------------
# Web App (apps/web) — Next.js public env (inlined at build time)
# -----------------------------------------------------------------------------
# Canonical site URL for SEO and links (production)
# NEXT_PUBLIC_SITE_URL=https://your-app.amplifyapp.com

# Supabase (client-safe anon key)
NEXT_PUBLIC_SUPABASE_URL=http://localhost:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key

# How the browser reaches the API. Either set a full URL or host + protocol + port.
# NEXT_PUBLIC_API_URL=https://your-api.example.com
NEXT_PUBLIC_API_HOST=localhost
NEXT_PUBLIC_API_PROTOCOL=http
# NEXT_PUBLIC_API_PUBLIC_PORT=9000

# -----------------------------------------------------------------------------
# Table lifecycle (apps/api)
# -----------------------------------------------------------------------------
# Grace period (ms) before an empty table is considered abandoned
TABLE_ABANDONMENT_GRACE_MS=60000

# -----------------------------------------------------------------------------
# Real money / Payments
# -----------------------------------------------------------------------------
# Set to 'true' to enable real-money tables
REAL_MONEY_ENABLED=false

# Adapter type: currently only 'evm_vault' is supported
# Future: could be 'stripe', 'lightning', etc.
PAYMENT_ADAPTER=evm_vault

# Generic payment configuration (adapter-agnostic)
# Deposit timeout (ms) for user to complete deposit (default 300000 = 5 min)
DEPOSIT_TIMEOUT_MS=300000
# Polling interval (ms) for payment events
PAYMENT_EVENT_SYNC_INTERVAL_MS=5000

# -----------------------------------------------------------------------------
# EVM Vault Adapter Configuration
# -----------------------------------------------------------------------------
# These config fields are read by the payments package (packages/payments).
# The API app does not directly access these - they are encapsulated within
# the payment adapter factory.
#
# EVM chain: 31337 = local Anvil, 84532 = Base Sepolia, 8453 = Base Mainnet
EVM_CHAIN_ID=31337
EVM_RPC_URL=http://127.0.0.1:8545

# USDC token contract (6 decimals)
# Local: deploy MockUSDC via contracts:deploy:local
# Base Mainnet: 0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913
# Base Sepolia: 0x036CbD53842c5426634e7929541eC2318f3dCF7e
EVM_USDC_CONTRACT=

# MoltPokerVault address (deploy via pnpm --filter @moltpoker/contracts deploy:local)
EVM_VAULT_ADDRESS=
# Vault deployer/admin (required for forge verify-contract)
EVM_VAULT_ADMIN=

# Settler EOA private key — DO NOT COMMIT (used for payouts/refunds)
EVM_SETTLER_PRIVATE_KEY=

# Optional: block to start event backfill from
EVM_START_BLOCK=

# Confirmations before considering a tx final
EVM_CONFIRMATIONS_REQUIRED=1

# -----------------------------------------------------------------------------
# Optional — Agent / simulation (if using OpenAI-backed agents)
# -----------------------------------------------------------------------------
OPENAI_API_KEY=
